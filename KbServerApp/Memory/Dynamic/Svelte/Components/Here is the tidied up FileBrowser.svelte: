<script>
  import { onMount } from 'svelte';
  import { memory_store } from './GlobalStorage.js';
  let selectedFile = '';
  let fileContent = '';

  onMount(() => {
    selectedFile = Object.keys(memory_store)[0];
    fileContent = memory_store[selectedFile];
  });

  function selectFile(file) {
    selectedFile = file;
    fileContent = memory_store[file];
  }
</script>

<style>
  .file-browser {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    font-size: 0.8em;
    color: blue;
    margin: 0;
  }
  .directory-list {
    width: 100%;
    height: 300px;
    overflow: auto;
    white-space: nowrap;
  }
  .file-editor {
    width: 100%;
    height: 300px;
    overflow: auto;
  }
  .file {
    cursor: pointer;
  }
  .file.selected {
    background-color: lightblue;
  }
</style>

<div class="file-browser">
  <div class="directory-list">
    <ul>
      {#each Object.keys(memory_store) as file (file)}
        <li class="file {selectedFile === file ? 'selected' : ''}" on:click={() => selectFile(file)}>{file}</li>
      {/each}
    </ul>
  </div>
  <div class="file-editor">
    <h2>Selected File: {selectedFile}</h2>
    <textarea bind:value={fileContent} style="font-size: 0.8em; color: black; background-color: white;"></textarea>
    <button style="border-radius: 5px; font-size: medium;" on:click={() => console.log('Save button clicked')}>Save</button>
  </div>
</div>